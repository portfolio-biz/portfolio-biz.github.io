# Советы по разработке

Универсальные заметки по багам и паттернам — учитывать с самого начала.

---

## CSS

### Горизонтальный скролл на iOS Safari
**Проблема:** Контент можно «утащить» пальцем вбок при вертикальном скролле.  
**Причина:** iOS Safari не реагирует на `overflow-x: hidden` только на `body` — нужен и `html`.  
**Решение:** Всегда ставить на оба элемента:
```css
html, body {
    overflow-x: hidden;
}
```
> На Android и десктопе достаточно `body`, на iOS — нет.

---

### Scroll-behavior smooth на html
При использовании `scroll-behavior: smooth` всегда добавлять туда же `overflow-x: hidden`:
```css
html {
    scroll-behavior: smooth;
    overflow-x: hidden; /* iOS fix */
}
```

---

## Meta / Viewport

### Запрет зума на интерактивных страницах
Для страниц, где нет нужды в зуме (вьюверы, приложения):
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
```
Для обычных лендингов — без `maximum-scale` и `user-scalable`, чтобы не ломать доступность.

---

### Порядок подключения скриптов с зависимостями
Если скрипты используют глобальные объекты друг друга — порядок `<script>` критичен. Документировать его комментарием `<!-- порядок важен! -->`.

---

## iOS Safari — известные особенности

| Проблема | Решение |
|---|---|
| `overflow-x: hidden` не работает на `body` | Добавить на `html` тоже |
| `position: fixed` прыгает при скролле | Использовать `position: sticky` или избегать fixed в формах |
| `100vh` включает адресную строку | Использовать `100dvh` или JS-высоту |
| `gap` в Flexbox не работает в старых iOS (< 14.5) | Использовать `margin` как фоллбэк |
